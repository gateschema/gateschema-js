{"version":3,"file":"gateschema.min.js","sources":["../esm/alias/index.js","../esm/util.js","../esm/keywords/oneOf.js","../esm/keywords/switch.js","../esm/keywords/format_validator.js","../esm/keywords/index.js","../esm/keywords/required.js","../esm/keywords/optional.js","../esm/keywords/boolean.js","../esm/keywords/number.js","../esm/keywords/string.js","../esm/keywords/binary.js","../esm/keywords/map.js","../esm/keywords/list.js","../esm/keywords/any.js","../esm/keywords/enum.js","../esm/keywords/enumList.js","../esm/keywords/value.js","../esm/keywords/format.js","../esm/keywords/pattern.js","../esm/keywords/length.js","../esm/keywords/min.js","../esm/keywords/max.js","../esm/keywords/unique.js","../esm/keywords/not.js","../esm/keywords/notEmpty.js","../esm/keywords/equal.js","../esm/keywords/allowAdditional.js","../esm/keywords/other.js","../esm/schemaBase.js","../esm/protoProps/index.js","../esm/protoProps/clone.js","../esm/protoProps/keys.js","../esm/protoProps/msg.js","../esm/protoProps/get.js","../esm/ValidationError.js","../esm/index.js","../esm/msgs.js"],"sourcesContent":["var cond = {\n    name: 'cond',\n    add: function () {\n        var _this = this;\n        return function (path, whenNotNull, whenNull) {\n            var _ = _this.constructor;\n            return _this.switch(path, [\n                {\n                    case: _.required,\n                    schema: whenNotNull\n                },\n                {\n                    case: _.any,\n                    schema: whenNull || _.any\n                }\n            ]);\n        };\n    }\n};\nvar r = {\n    name: 'r',\n    add: function () {\n        return this.required;\n    }\n};\nvar o = {\n    name: 'o',\n    add: function () {\n        return this.optional;\n    }\n};\nvar bool = {\n    name: 'bool',\n    add: function () {\n        return this.boolean;\n    }\n};\nvar num = {\n    name: 'num',\n    add: function () {\n        return this.number;\n    }\n};\nvar str = {\n    name: 'str',\n    add: function () {\n        return this.string;\n    }\n};\nvar bin = {\n    name: 'bin',\n    add: function () {\n        return this.binary;\n    }\n};\nexport default [r, o, bool, num, str, bin, cond];\n//# sourceMappingURL=index.js.map","export function isObject(x) {\n    return x != null && typeof x === 'object';\n}\nexport function getConstraints(schema) {\n    if (Array.isArray(schema)) {\n        return schema;\n    }\n    return schema.constraints;\n}\nexport var charCount = (function (ArrayFrom) {\n    return ArrayFrom\n        ? function (str) {\n            return str.replace(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g, '_').length;\n        }\n        : function (str) { return ArrayFrom(str).length; };\n})(Array.from);\nexport function isBase64(str) {\n    return (typeof str === 'string' &&\n        /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/.test(str));\n}\n//# sourceMappingURL=util.js.map","function getMatchSchema(_a, cb) {\n    var _this = this;\n    var path = _a.path, args = _a.args, rootData = _a.rootData, _b = _a.state, state = _b === void 0 ? {} : _b, options = _a.options;\n    var schemas = args[0];\n    var length = schemas.length;\n    var value = this.getValue(path, rootData, path, state.values);\n    var schemaItem;\n    var next = function (i) {\n        if (i < length) {\n            schemaItem = schemas[i];\n            _this.validate(value, {\n                schema: schemaItem,\n                path: path,\n                rootData: rootData,\n                state: state,\n                options: options\n            }, function (err) {\n                if (!err) {\n                    cb(schemaItem);\n                }\n                else {\n                    next(++i);\n                }\n            });\n        }\n        else {\n            cb();\n        }\n    };\n    next(0);\n}\nexport default {\n    getMatchSchema: getMatchSchema,\n    isHighOrder: true,\n    name: 'oneOf',\n    validator: function (value, _a, cb) {\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        getMatchSchema.call(this, {\n            path: path,\n            args: args,\n            rootData: rootData,\n            state: state,\n            options: options\n        }, function (schema) {\n            if (schema) {\n                cb();\n            }\n            else {\n                cb(true);\n            }\n        });\n    }\n};\n//# sourceMappingURL=oneOf.js.map","import { getConstraints } from '../util';\nfunction getMatchSchema(_a, cb) {\n    var _this = this;\n    var path = _a.path, args = _a.args, rootData = _a.rootData, _b = _a.state, state = _b === void 0 ? {} : _b, options = _a.options;\n    var targetPath = args[0], branches = args[1];\n    var length = branches.length;\n    var targetValue = this.getValue(targetPath, rootData, path, state.values);\n    var next = function (i) {\n        if (i < length) {\n            var branch = branches[i];\n            var caseItem = branch.case;\n            var schema_1 = branch.schema;\n            _this.validate(targetValue, {\n                schema: caseItem,\n                path: targetPath,\n                rootData: rootData,\n                state: state,\n                options: options\n            }, function (err) {\n                if (!err) {\n                    cb(schema_1);\n                }\n                else {\n                    next(++i);\n                }\n            });\n        }\n        else {\n            cb();\n        }\n    };\n    next(0);\n}\nexport default {\n    getMatchSchema: getMatchSchema,\n    isHighOrder: true,\n    name: 'switch',\n    validator: function (value, _a, cb) {\n        var _this = this;\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        getMatchSchema.call(this, {\n            args: args,\n            path: path,\n            rootData: rootData,\n            state: state,\n            options: options\n        }, function (schema) {\n            if (schema) {\n                _this.validate(value, {\n                    schema: getConstraints(schema),\n                    path: path,\n                    rootData: rootData,\n                    state: state,\n                    options: options\n                }, cb);\n            }\n            else {\n                cb();\n            }\n        });\n    }\n};\n//# sourceMappingURL=switch.js.map","var DATE = /^(\\d\\d\\d\\d)-(\\d\\d)-(\\d\\d)$/;\nvar DAYS = [0, 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];\nvar TIME = /^(\\d\\d):(\\d\\d):(\\d\\d)(\\.\\d+)?(z|[+-]\\d\\d:\\d\\d)?$/i;\nvar DATE_TIME_SEPARATOR = /t|\\s/i;\nvar HOSTNAME = /^[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*$/i;\nvar NOT_URI_FRAGMENT = /\\/|:/;\nvar URI = /^(?:[a-z][a-z0-9+\\-.]*:)(?:\\/?\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\\.[a-z0-9\\-._~!$&'()*+,;=:]+)\\]|(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)|(?:[a-z0-9\\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\\d*)?(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\\/(?:(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\\/(?:[a-z0-9\\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\\?(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;\nvar URL = /^(?:(?:http[s\\u017F]?|ftp):\\/\\/)(?:(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+(?::(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?@)?(?:(?!10(?:\\.[0-9]{1,3}){3})(?!127(?:\\.[0-9]{1,3}){3})(?!169\\.254(?:\\.[0-9]{1,3}){2})(?!192\\.168(?:\\.[0-9]{1,3}){2})(?!172\\.(?:1[6-9]|2[0-9]|3[01])(?:\\.[0-9]{1,3}){2})(?:[1-9][0-9]?|1[0-9][0-9]|2[01][0-9]|22[0-3])(?:\\.(?:1?[0-9]{1,2}|2[0-4][0-9]|25[0-5])){2}(?:\\.(?:[1-9][0-9]?|1[0-9][0-9]|2[0-4][0-9]|25[0-4]))|(?:(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)(?:\\.(?:(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+-?)*(?:[0-9KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])+)*(?:\\.(?:(?:[KSa-z\\xA1-\\uD7FF\\uE000-\\uFFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF]){2,})))(?::[0-9]{2,5})?(?:\\/(?:[\\0-\\x08\\x0E-\\x1F!-\\x9F\\xA1-\\u167F\\u1681-\\u1FFF\\u200B-\\u2027\\u202A-\\u202E\\u2030-\\u205E\\u2060-\\u2FFF\\u3001-\\uD7FF\\uE000-\\uFEFE\\uFF00-\\uFFFF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]|[\\uD800-\\uDBFF](?![\\uDC00-\\uDFFF])|(?:[^\\uD800-\\uDBFF]|^)[\\uDC00-\\uDFFF])*)?$/i;\nvar EMAIL = /^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i;\nvar IPV4 = /^(?:(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d\\d?)$/;\nvar IPV6 = /^\\s*(?:(?:(?:[0-9a-f]{1,4}:){7}(?:[0-9a-f]{1,4}|:))|(?:(?:[0-9a-f]{1,4}:){6}(?::[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){5}(?:(?:(?::[0-9a-f]{1,4}){1,2})|:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3})|:))|(?:(?:[0-9a-f]{1,4}:){4}(?:(?:(?::[0-9a-f]{1,4}){1,3})|(?:(?::[0-9a-f]{1,4})?:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){3}(?:(?:(?::[0-9a-f]{1,4}){1,4})|(?:(?::[0-9a-f]{1,4}){0,2}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){2}(?:(?:(?::[0-9a-f]{1,4}){1,5})|(?:(?::[0-9a-f]{1,4}){0,3}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?:(?:[0-9a-f]{1,4}:){1}(?:(?:(?::[0-9a-f]{1,4}){1,6})|(?:(?::[0-9a-f]{1,4}){0,4}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:))|(?::(?:(?:(?::[0-9a-f]{1,4}){1,7})|(?:(?::[0-9a-f]{1,4}){0,5}:(?:(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]?\\d)){3}))|:)))(?:%.+)?\\s*$/i;\nfunction _isLeapYear(year) {\n    return year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0);\n}\nfunction date(str) {\n    var matches = str.match(DATE);\n    if (!matches) {\n        return false;\n    }\n    var year = +matches[1];\n    var month = +matches[2];\n    var day = +matches[3];\n    return (month >= 1 &&\n        month <= 12 &&\n        day >= 1 &&\n        day <= (month === 2 && _isLeapYear(year) ? 29 : DAYS[month]));\n}\nfunction time(str, full) {\n    var matches = str.match(TIME);\n    if (!matches) {\n        return false;\n    }\n    var hour = +matches[1];\n    var minute = +matches[2];\n    var second = +matches[3];\n    var timeZone = matches[5];\n    return (((hour <= 23 && minute <= 59 && second <= 59) ||\n        (hour === 23 && minute === 59 && second === 60)) &&\n        (!full || timeZone));\n}\nfunction date_time(str) {\n    var dateTime = str.split(DATE_TIME_SEPARATOR);\n    return dateTime.length === 2 && date(dateTime[0]) && time(dateTime[1], true);\n}\nfunction hostname(str) {\n    return str.length <= 255 && HOSTNAME.test(str);\n}\nfunction uri(str) {\n    return NOT_URI_FRAGMENT.test(str) && URI.test(str);\n}\nfunction url(str) {\n    return URL.test(str);\n}\nfunction email(str) {\n    return EMAIL.test(str);\n}\nfunction ipv4(str) {\n    return IPV4.test(str);\n}\nfunction ipv6(str) {\n    return IPV6.test(str);\n}\nvar validators = {\n    date: date,\n    'date-time': date_time,\n    email: email,\n    hostname: hostname,\n    ipv4: ipv4,\n    ipv6: ipv6,\n    uri: uri,\n    url: url\n};\nexport default validators;\n//# sourceMappingURL=format_validator.js.map","import optional from './optional';\nimport required from './required';\nimport binary from './binary';\nimport boolean from './boolean';\nimport number from './number';\nimport string from './string';\nimport any from './any';\nimport enum_ from './enum';\nimport enumList from './enumList';\nimport list from './list';\nimport map_ from './map';\nimport oneOf from './oneOf';\nimport value from './value';\nimport keywordSwitch from './switch';\nimport equal from './equal';\nimport format from './format';\nimport length from './length';\nimport max from './max';\nimport min from './min';\nimport not from './not';\nimport notEmpty from './notEmpty';\nimport pattern from './pattern';\nimport unique from './unique';\nimport allowAdditional from './allowAdditional';\nimport other from './other';\nexport default [\n    required,\n    optional,\n    boolean,\n    number,\n    string,\n    binary,\n    map_,\n    list,\n    oneOf,\n    any,\n    enum_,\n    enumList,\n    value,\n    format,\n    pattern,\n    length,\n    min,\n    max,\n    unique,\n    not,\n    notEmpty,\n    equal,\n    keywordSwitch,\n    allowAdditional,\n    other\n];\n//# sourceMappingURL=index.js.map","export default {\n    name: 'required',\n    add: function () {\n        var first = this.constraints[0];\n        if (first && (first === 'optional' || first.name === 'optional')) {\n            this.constraints.splice(0, 1, 'required');\n        }\n        else {\n            this.constraints.unshift('required');\n        }\n        this.lastConstraintIndex = 0;\n        return this;\n    },\n    validator: function (value, ctx, cb) {\n        value == null ? cb(true) : cb();\n    }\n};\n//# sourceMappingURL=required.js.map","export default {\n    name: 'optional',\n    add: function () {\n        var first = this.constraints[0];\n        if (first && (first === 'required' || first.name === 'required')) {\n            this.constraints.splice(0, 1, 'optional');\n        }\n        else {\n            this.constraints.unshift('optional');\n        }\n        this.lastConstraintIndex = 0;\n        return this;\n    },\n    validator: function (value, ctx, cb) {\n        value == null ? cb(this.BREAK) : cb();\n    }\n};\n//# sourceMappingURL=optional.js.map","export default {\n    name: 'boolean',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.types[path] = 'boolean';\n        cb(typeof value !== 'boolean');\n    }\n};\n//# sourceMappingURL=boolean.js.map","import Big from 'big.js';\nexport default {\n    name: 'number',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.types[path] = 'number';\n        try {\n            new Big(value);\n        }\n        catch (e) {\n            return cb(true);\n        }\n        cb();\n    }\n};\n//# sourceMappingURL=number.js.map","export default {\n    name: 'string',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.types[path] = 'string';\n        cb(typeof value !== 'string');\n    }\n};\n//# sourceMappingURL=string.js.map","import { isBase64 } from '../util';\nexport default {\n    name: 'binary',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.types[path] = 'binary';\n        if (isBase64(value)) {\n            return cb();\n        }\n        if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n            return cb();\n        }\n        cb(true);\n    }\n};\n//# sourceMappingURL=binary.js.map","import { isObject } from '../util';\nexport default {\n    isHighOrder: true,\n    name: 'map',\n    validator: function (value, _a, cb) {\n        var _this = this;\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        state.types[path] = 'map';\n        var obj = args[0];\n        var keys = Object.keys(obj);\n        var length = keys.length;\n        var stateValues = state.values;\n        var stateMapDefinitions = state.mapDefinitions;\n        if (stateMapDefinitions[path]) {\n            stateMapDefinitions[path].push(obj);\n        }\n        else {\n            stateValues[path] = value;\n            stateMapDefinitions[path] = [obj];\n        }\n        if (!isObject(value)) {\n            return cb(true);\n        }\n        var i = 0;\n        var key;\n        var schema;\n        var next = function (err) {\n            if (err) {\n                return cb(err);\n            }\n            if (i < length) {\n                key = keys[i++];\n                schema = obj[key];\n                return _this.validate(value[key], {\n                    schema: schema,\n                    path: path === '/' ? \"/\" + key : path + \"/\" + key,\n                    rootData: rootData,\n                    state: state,\n                    options: options\n                }, next);\n            }\n            return cb(err);\n        };\n        next();\n    },\n    getChildSchema: function (_a, cb) {\n        var childKey = _a.childKey, args = _a.args;\n        var obj = args[0];\n        cb(obj[childKey]);\n    }\n};\n//# sourceMappingURL=map.js.map","export default {\n    isHighOrder: true,\n    name: 'list',\n    validator: function (value, _a, cb) {\n        var _this = this;\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        if (!Array.isArray(value)) {\n            return cb(true);\n        }\n        state.types[path] = 'list';\n        var i = 0;\n        var length = value.length;\n        var schema = args[0];\n        var next = function (err) {\n            if (err) {\n                return cb(err);\n            }\n            if (i < length) {\n                var key = i++;\n                return _this.validate(value[key], {\n                    schema: schema,\n                    path: path === '/' ? \"/\" + key : path + \"/\" + key,\n                    rootData: rootData,\n                    state: state,\n                    options: options\n                }, next);\n            }\n            return cb(err);\n        };\n        next();\n    }\n};\n//# sourceMappingURL=list.js.map","export default {\n    name: 'any',\n    validator: function (value, ctx, cb) {\n        cb();\n    }\n};\n//# sourceMappingURL=any.js.map","export default {\n    isHighOrder: true,\n    name: 'enum',\n    validator: function (receivedValue, _a, cb) {\n        var args = _a.args;\n        var _b = args[0], expectedValues = _b === void 0 ? {} : _b;\n        for (var key in expectedValues) {\n            if (expectedValues[key] === receivedValue) {\n                return cb();\n            }\n        }\n        var keys = Object.keys(expectedValues);\n        var values = keys.map(function (key) { return expectedValues[key]; });\n        cb({\n            keys: JSON.stringify(keys),\n            values: JSON.stringify(values)\n        });\n    }\n};\n//# sourceMappingURL=enum.js.map","export default {\n    isHighOrder: true,\n    name: 'enumList',\n    validator: function (receivedValue, _a, cb) {\n        var path = _a.path, rootData = _a.rootData, args = _a.args, state = _a.state, options = _a.options;\n        var _b = args[0], expectedValues = _b === void 0 ? {} : _b;\n        var constraints = [\n            {\n                keyword: 'list',\n                args: [\n                    [\n                        {\n                            keyword: 'enum',\n                            args: [expectedValues]\n                        }\n                    ]\n                ]\n            }\n        ];\n        this.validate(receivedValue, {\n            schema: constraints,\n            path: path,\n            rootData: rootData,\n            state: state,\n            options: options\n        }, function (err) {\n            if (err) {\n                var keys = Object.keys(expectedValues);\n                var values = keys.map(function (key) { return expectedValues[key]; });\n                return cb({\n                    keys: keys,\n                    values: values\n                });\n            }\n            cb();\n        });\n    }\n};\n//# sourceMappingURL=enumList.js.map","export default {\n    isHighOrder: true,\n    name: 'value',\n    validator: function (value, _a, cb) {\n        var args = _a.args;\n        var expectedValue = args[0];\n        if (value !== expectedValue) {\n            return cb({\n                value: expectedValue\n            });\n        }\n        return cb();\n    }\n};\n//# sourceMappingURL=value.js.map","import validators from './format_validator';\nexport default {\n    isHighOrder: true,\n    name: 'format',\n    validator: function (value, _a, cb) {\n        var args = _a.args;\n        var format = args[0];\n        var validator = validators[format];\n        if (validator) {\n            if (!validator(value)) {\n                return cb({\n                    format: format\n                });\n            }\n            return cb();\n        }\n        return cb(new Error(\"no validator for format: \" + format));\n    }\n};\n//# sourceMappingURL=format.js.map","export default {\n    isHighOrder: true,\n    name: 'pattern',\n    add: function () {\n        var _this = this;\n        return function (pattern, flags) {\n            var constraint = { keyword: 'pattern' };\n            if (pattern instanceof RegExp) {\n                constraint.args = [pattern.source, pattern.flags];\n            }\n            else if (typeof pattern === 'string') {\n                constraint.args = [pattern, flags];\n            }\n            else {\n                throw new Error('pattern should be an RegExp instance or RegExp source string');\n            }\n            _this.add(constraint);\n            return _this;\n        };\n    },\n    validator: function (value, _a, cb) {\n        var args = _a.args;\n        var reg;\n        try {\n            reg = RegExp.apply(null, args);\n        }\n        catch (e) {\n            return cb(new Error('invalid pattern'));\n        }\n        return cb(!reg.test(value));\n    }\n};\n//# sourceMappingURL=pattern.js.map","import { charCount } from '../util';\nexport default {\n    isHighOrder: true,\n    name: 'length',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state, args = _a.args;\n        var type = state.types[path];\n        var valueLength;\n        if (!type) {\n            return cb(new Error('missing type declaration'));\n        }\n        switch (type) {\n            case 'string':\n                valueLength = charCount(value);\n                break;\n            case 'list':\n                valueLength = value.length;\n                break;\n            case 'binary':\n                if (typeof value === 'string') {\n                    valueLength = value.length;\n                    if (valueLength > 0) {\n                        var index = value.indexOf('=');\n                        var padding = index > -1 ? valueLength - index : 0;\n                        valueLength = (3 * valueLength) / 4 - padding;\n                    }\n                }\n                else {\n                    valueLength = value.byteLength;\n                }\n                break;\n            default:\n                return cb(new Error(\"can't use length constraint on type: \" + type));\n        }\n        var err;\n        var errType;\n        var length;\n        var minLength;\n        var maxLength;\n        var expected = args[0];\n        if (Array.isArray(expected)) {\n            minLength = expected[0], maxLength = expected[1];\n            if (minLength != null && maxLength != null) {\n                if (valueLength < minLength || valueLength > maxLength) {\n                    err = true;\n                    errType = 'range';\n                }\n            }\n            else if (minLength != null) {\n                if (valueLength < minLength) {\n                    err = true;\n                    errType = 'min';\n                }\n            }\n            else if (maxLength != null) {\n                if (valueLength > maxLength) {\n                    err = true;\n                    errType = 'max';\n                }\n            }\n            else {\n                return cb(new Error('missing minLength or maxLength'));\n            }\n        }\n        else {\n            length = expected;\n            if (valueLength !== expected) {\n                err = true;\n                errType = 'match';\n            }\n        }\n        if (err) {\n            return cb({\n                KEY: \"length_\" + type + \"_\" + errType,\n                length: length,\n                maxLength: maxLength,\n                minLength: minLength,\n                valueLength: valueLength\n            });\n        }\n        cb();\n    }\n};\n//# sourceMappingURL=length.js.map","import Big from 'big.js';\nexport default {\n    isHighOrder: true,\n    name: 'min',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state, args = _a.args;\n        var min = args[0], isExclusive = args[1];\n        var valueBig = new Big(value);\n        var minBig = new Big(min);\n        if (valueBig.lt(minBig) || (isExclusive && valueBig.eq(minBig))) {\n            return cb({\n                KEY: isExclusive ? 'min_exclusive' : 'min',\n                value: value,\n                min: min,\n                isExclusive: isExclusive\n            });\n        }\n        cb();\n    }\n};\n//# sourceMappingURL=min.js.map","import Big from 'big.js';\nexport default {\n    isHighOrder: true,\n    name: 'max',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state, args = _a.args;\n        var max = args[0], isExclusive = args[1];\n        var valueBig = new Big(value);\n        var maxBig = new Big(max);\n        if (valueBig.gt(maxBig) || (isExclusive && valueBig.eq(maxBig))) {\n            return cb({\n                KEY: isExclusive ? 'max_exclusive' : 'max',\n                value: value,\n                max: max,\n                isExclusive: isExclusive\n            });\n        }\n        cb();\n    }\n};\n//# sourceMappingURL=max.js.map","export default {\n    name: 'unique',\n    validator: function (values, ctx, cb) {\n        var uniqueValues = [];\n        for (var i = 0, length = values.length; i < length; i++) {\n            var value = values[i];\n            if (uniqueValues.indexOf(value) === -1) {\n                uniqueValues.push(value);\n                continue;\n            }\n            return cb(true);\n        }\n        cb();\n    }\n};\n//# sourceMappingURL=unique.js.map","export default {\n    isHighOrder: true,\n    name: 'not',\n    validator: function (value, _a, cb) {\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args, options = _a.options;\n        var schema = args[0];\n        this.validate(value, {\n            schema: schema,\n            path: path,\n            rootData: rootData,\n            state: state,\n            options: options\n        }, function (err) {\n            if (err) {\n                cb();\n            }\n            else {\n                cb(true);\n            }\n        });\n    }\n};\n//# sourceMappingURL=not.js.map","import { isObject } from '../util';\nexport default {\n    name: 'notEmpty',\n    validator: function (value, ctx, cb) {\n        var type = typeof value;\n        switch (true) {\n            case type === 'number':\n                cb(value === 0);\n                break;\n            case type === 'string':\n                cb(value === '');\n                break;\n            case Array.isArray(value):\n                cb(value.length === 0);\n                break;\n            case isObject(value):\n                cb(Object.keys(value).length === 0);\n                break;\n            default:\n                cb(value == null);\n        }\n    }\n};\n//# sourceMappingURL=notEmpty.js.map","export default {\n    isHighOrder: true,\n    name: 'equal',\n    validator: function (value, _a, cb) {\n        var path = _a.path, rootData = _a.rootData, state = _a.state, args = _a.args;\n        var targetId = args[0];\n        var targetValue = this.getValue(targetId, rootData, path, state.values);\n        if (value !== targetValue) {\n            return cb({\n                id: targetId\n            });\n        }\n        return cb();\n    }\n};\n//# sourceMappingURL=equal.js.map","export default {\n    name: 'allowAdditional',\n    validator: function (value, _a, cb) {\n        var path = _a.path, state = _a.state;\n        state.mapAllowAdditional[path] = true;\n        cb();\n    }\n};\n//# sourceMappingURL=allowAdditional.js.map","export default {\n    isHighOrder: true,\n    name: 'other',\n    validator: function (value, ctx, cb) {\n        cb();\n    }\n};\n//# sourceMappingURL=other.js.map","var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport { getConstraints, isObject } from './util';\nimport ValidationError from './ValidationError';\nfunction getCacheResult(path, schema, _a) {\n    var cache = _a.cache;\n    if (typeof cache[path] !== 'undefined') {\n        var target = cache[path].find(function (item) { return item[0] === schema; });\n        if (target) {\n            return target[1];\n        }\n    }\n}\nfunction appendCacheResult(result, path, schema, _a) {\n    var cache = _a.cache;\n    var cacheItem = [schema, result];\n    if (cache[path]) {\n        cache[path].push(cacheItem);\n    }\n    else {\n        cache[path] = [cacheItem];\n    }\n}\nfunction removeAdditional(path, _a) {\n    var values = _a.values, mapAllowAdditional = _a.mapAllowAdditional, mapDefinitions = _a.mapDefinitions;\n    var definition = mapDefinitions[path];\n    if (definition && !mapAllowAdditional[path]) {\n        var objValue = values[path];\n        var keys = definition.reduce(function (result, current) {\n            result.push.apply(result, Object.keys(current));\n            return result;\n        }, []);\n        for (var prop in objValue) {\n            if (keys.indexOf(prop) === -1) {\n                delete objValue[prop];\n            }\n        }\n    }\n}\nvar GateSchema = (function () {\n    function GateSchema(options) {\n        if (options === void 0) { options = {}; }\n        var constraints = options.constraints;\n        if (typeof constraints === 'undefined') {\n            constraints = this.initConstraints.slice();\n        }\n        this.constraints = constraints;\n        Object.defineProperty(this, 'lastConstraintIndex', {\n            value: 0,\n            writable: true\n        });\n    }\n    GateSchema.addAlias = function (_a) {\n        var name = _a.name, add = _a.add;\n        var ctor = this;\n        var proto = ctor.prototype;\n        if (proto[name]) {\n            throw new Error(\"keyword \" + name + \" conflict\");\n        }\n        Object.defineProperty(ctor, name, {\n            get: function () {\n                return new ctor()[name];\n            }\n        });\n        Object.defineProperty(proto, name, {\n            get: function () {\n                return add.call(this);\n            }\n        });\n    };\n    GateSchema.addKeyword = function (keyword, msgs) {\n        var name = keyword.name, validator = keyword.validator, getChildSchema = keyword.getChildSchema, getMatchSchema = keyword.getMatchSchema, isAsync = keyword.isAsync;\n        var proto = this.prototype;\n        var ctor = this;\n        Object.defineProperty(ctor, name, {\n            get: function () {\n                return new this()[name];\n            }\n        });\n        Object.defineProperty(proto, name, {\n            get: ctor.createAddFunction(keyword)\n        });\n        if (msgs) {\n            this.addMsgs(msgs);\n        }\n        if (isAsync) {\n            ctor._asyncKeywords[name] = true;\n        }\n        this._validators[name] = validator;\n        if (getChildSchema) {\n            this._getChildSchema[name] = getChildSchema;\n        }\n        if (getMatchSchema) {\n            this._getMatchSchema[name] = getMatchSchema;\n        }\n    };\n    GateSchema.createAddFunction = function (keyword) {\n        var name = keyword.name, isHighOrder = keyword.isHighOrder, add = keyword.add;\n        if (typeof add === 'function') {\n            return add;\n        }\n        else if (isHighOrder) {\n            return function () {\n                var _this = this;\n                return function () {\n                    var args = [];\n                    for (var _i = 0; _i < arguments.length; _i++) {\n                        args[_i] = arguments[_i];\n                    }\n                    if (!args) {\n                        throw new Error('arguments are required');\n                    }\n                    return _this.add({\n                        args: args,\n                        keyword: name\n                    });\n                };\n            };\n        }\n        return function () {\n            return this.add(name);\n        };\n    };\n    GateSchema.addMsgs = function (msgs) {\n        Object.assign(this.msgs, msgs);\n    };\n    GateSchema.resolvePath = function (targetPath, currentPath) {\n        if (targetPath.indexOf('./') === 0) {\n            targetPath =\n                currentPath.slice(0, currentPath.lastIndexOf('/')) +\n                    targetPath.slice(1);\n        }\n        else if (targetPath.indexOf('../') === 0) {\n            var keySplited = targetPath.split('../');\n            var keyLength = keySplited.length;\n            var idSplited = currentPath.split('/');\n            var idLength = idSplited.length;\n            if (idLength >= keyLength) {\n                targetPath = currentPath\n                    .split('/')\n                    .slice(0, -keyLength)\n                    .concat(keySplited[keyLength - 1])\n                    .join('/');\n            }\n            else {\n                throw new Error(\"Can't resolve \" + currentPath);\n            }\n        }\n        return targetPath;\n    };\n    GateSchema.getValue = function (path, rootData, currentPath, values) {\n        if (values === void 0) { values = {}; }\n        if (path === '/') {\n            return rootData;\n        }\n        if (currentPath != null) {\n            path = this.resolvePath(path, currentPath);\n        }\n        if (!Object.getOwnPropertyDescriptor(values, path)) {\n            var prop = void 0;\n            var parentPath = void 0;\n            var parentValue = void 0;\n            var index = path.lastIndexOf('/');\n            if (index > 0) {\n                prop = path.slice(index + 1);\n                parentPath = path.slice(0, index);\n                parentValue = GateSchema.getValue(parentPath, rootData, null, values);\n            }\n            else {\n                prop = path.slice(1);\n                parentValue = rootData;\n            }\n            if (isObject(parentValue)) {\n                values[path] = parentValue[prop];\n            }\n        }\n        return values[path];\n    };\n    GateSchema.getSchema = function (path, _a, cb) {\n        var _this = this;\n        var options = _a.options, rootSchema = _a.rootSchema, rootData = _a.rootData;\n        if (path === '/') {\n            return cb(rootSchema);\n        }\n        var keys = path.split('/').slice(1);\n        var getChildSchema = function (_a, callback) {\n            var childKey = _a.childKey, parentPath = _a.parentPath, schema = _a.schema;\n            var j = 0;\n            var constraint;\n            var keyword;\n            var args;\n            var getMatchSchema;\n            var getChildSchemaOfKeyword;\n            var constraints = getConstraints(schema);\n            var constraintsLength = constraints.length;\n            var tryNext = function (result) {\n                if (!result && j < constraintsLength) {\n                    constraint = constraints[j++];\n                    if (typeof constraint === 'object') {\n                        keyword = constraint.keyword;\n                        args = constraint.args;\n                    }\n                    else {\n                        keyword = constraint;\n                        args = [];\n                    }\n                    getMatchSchema = _this._getMatchSchema[keyword];\n                    getChildSchemaOfKeyword = _this._getChildSchema[keyword];\n                    if (getMatchSchema) {\n                        getMatchSchema.call(_this, { path: parentPath, args: args, rootData: rootData, state: state, options: options }, function (matchSchema) {\n                            if (matchSchema) {\n                                getChildSchema({\n                                    childKey: childKey,\n                                    parentPath: parentPath,\n                                    schema: matchSchema\n                                }, tryNext);\n                            }\n                            else {\n                                tryNext();\n                            }\n                        });\n                    }\n                    else if (getChildSchemaOfKeyword) {\n                        getChildSchemaOfKeyword.call(_this, { args: args, childKey: childKey }, tryNext);\n                    }\n                    else {\n                        tryNext();\n                    }\n                }\n                else {\n                    callback(result);\n                }\n            };\n            tryNext();\n        };\n        var i = 0;\n        var currentPath = '';\n        var child;\n        var length = keys.length;\n        var state = {\n            mapAllowAdditional: {},\n            mapDefinitions: {},\n            types: {},\n            values: {},\n            cache: {}\n        };\n        var next = function (currentSchema) {\n            if (currentSchema) {\n                if (i < length) {\n                    currentPath += child ? \"/\" + child : \"/\";\n                    child = keys[i++];\n                    getChildSchema({\n                        childKey: child,\n                        parentPath: currentPath,\n                        schema: currentSchema\n                    }, next);\n                }\n                else {\n                    cb(Array.isArray(currentSchema)\n                        ? new _this({\n                            constraints: currentSchema\n                        })\n                        : currentSchema);\n                }\n            }\n            else {\n                cb();\n            }\n        };\n        next(rootSchema);\n    };\n    GateSchema.extend = function (options) {\n        if (options === void 0) { options = {}; }\n        var defaultOptions = options.defaultOptions, initConstraints = options.initConstraints, keywords = options.keywords, aliases = options.aliases, msgs = options.msgs;\n        var parent = this;\n        var GateSchemaExtended = (function (_super) {\n            __extends(GateSchemaExtended, _super);\n            function GateSchemaExtended() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            return GateSchemaExtended;\n        }(parent));\n        Object.assign(GateSchemaExtended, parent);\n        GateSchemaExtended.msgs = Object.create(parent.msgs);\n        GateSchemaExtended._validators = Object.create(parent._validators);\n        GateSchemaExtended._getChildSchema = Object.create(parent._getChildSchema);\n        GateSchemaExtended._getMatchSchema = Object.create(parent._getMatchSchema);\n        var proto = GateSchemaExtended.prototype;\n        if (defaultOptions) {\n            proto.defaultOptions = defaultOptions;\n        }\n        if (initConstraints) {\n            proto.initConstraints = initConstraints;\n        }\n        if (Array.isArray(keywords)) {\n            keywords.forEach(function (item) {\n                GateSchemaExtended.addKeyword(item);\n            });\n        }\n        if (Array.isArray(aliases)) {\n            aliases.forEach(function (item) {\n                GateSchemaExtended.addAlias(item);\n            });\n        }\n        if (msgs) {\n            GateSchemaExtended.addMsgs(msgs);\n        }\n        return GateSchemaExtended;\n    };\n    GateSchema.getMsg = function (key) {\n        return this.msgs[key];\n    };\n    GateSchema.createError = function (name, value, msgParams, ctx) {\n        var constraint = ctx.constraint;\n        var errorParams = {\n            keyword: name,\n            msgParams: msgParams,\n            path: ctx.path,\n            value: value\n        };\n        var msg = constraint.msg || this.getMsg(msgParams.KEY);\n        errorParams.msg =\n            this.formatMsg(msg, msgParams, constraint) || 'invalid value';\n        return new this.Error(errorParams);\n    };\n    GateSchema.formatMsg = function (msg, msgParams, constraint) {\n        if (msg && msg.indexOf('${') > -1) {\n            msg = msg.replace(/\\$\\{(.+?)\\}/g, function (match, key) {\n                return msgParams[key];\n            });\n        }\n        return msg;\n    };\n    GateSchema.validate = function (value, _a, cb) {\n        var _this = this;\n        var path = _a.path, rootData = _a.rootData, schema = _a.schema, state = _a.state, _b = _a.options, options = _b === void 0 ? {} : _b;\n        var _c = this, _validators = _c._validators, BREAK = _c.BREAK, VError = _c.Error, _asyncKeywords = _c._asyncKeywords;\n        var REMOVE_ADDITIONAL = options.removeAdditional, SKIPS = options.skips, SKIP_ASYNC = options.skipAsync, USE_CACHE = options.useCache;\n        if (USE_CACHE) {\n            var resultCache = getCacheResult(path, schema, state);\n            if (resultCache) {\n                return cb(resultCache);\n            }\n            var originCb_1 = cb;\n            cb = function (err) {\n                appendCacheResult(err, path, schema, state);\n                originCb_1(err);\n            };\n        }\n        var constraints = getConstraints(schema);\n        var constraintsLength = constraints.length;\n        var i = 0;\n        var item;\n        var args;\n        var validator;\n        var keyword;\n        var result;\n        var next = function (err) {\n            if (err) {\n                switch (true) {\n                    case err === BREAK:\n                        result = BREAK;\n                        break;\n                    case err instanceof VError:\n                        result = err;\n                        break;\n                    case err instanceof Error:\n                        throw err;\n                        break;\n                    default:\n                        var msgParams = err === true ? {} : err;\n                        if (!msgParams.KEY) {\n                            msgParams.KEY = keyword;\n                        }\n                        result = _this.createError(keyword, value, msgParams, {\n                            constraint: item,\n                            path: path,\n                            rootData: rootData,\n                            state: state\n                        });\n                }\n                cb(result);\n            }\n            else if (i < constraintsLength) {\n                item = constraints[i++];\n                keyword = typeof item === 'string' ? item : item.keyword;\n                if (SKIP_ASYNC && _asyncKeywords[keyword]) {\n                    next();\n                }\n                args = item.args;\n                validator = _validators[keyword];\n                if (validator) {\n                    validator.call(_this, value, {\n                        args: args,\n                        path: path,\n                        rootData: rootData,\n                        state: state,\n                        options: options\n                    }, next);\n                }\n                else if (SKIPS && SKIPS.indexOf(keyword) > -1) {\n                    next();\n                }\n                else {\n                    cb(new Error(\"no validator for keyword: \" + keyword + \", constraint: \" + JSON.stringify(item)));\n                }\n            }\n            else {\n                if (REMOVE_ADDITIONAL) {\n                    removeAdditional(path, state);\n                }\n                cb(null);\n            }\n        };\n        next();\n    };\n    GateSchema.prototype.add = function (constraint) {\n        this.lastConstraintIndex = this.constraints.length;\n        this.constraints.push(constraint);\n        return this;\n    };\n    GateSchema.prototype.validate = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var value = arguments[0];\n        var options = arguments[1];\n        var cb = arguments[2];\n        var Ctor = this.constructor;\n        if (typeof options === 'function') {\n            cb = options;\n            options = undefined;\n        }\n        if (options == null) {\n            options = this.defaultOptions;\n        }\n        var ctx = {\n            schema: this.constraints,\n            path: '/',\n            rootData: value,\n            state: {\n                mapAllowAdditional: {},\n                mapDefinitions: {},\n                types: {},\n                values: {},\n                cache: {}\n            },\n            options: options\n        };\n        if (typeof cb === 'function') {\n            Ctor.validate(value, ctx, function (err) {\n                cb(err === Ctor.BREAK ? null : err);\n            });\n        }\n        else {\n            return new Promise(function (resolve, reject) {\n                Ctor.validate(value, ctx, function (err) {\n                    err = err === Ctor.BREAK ? null : err;\n                    return err ? reject(err) : resolve(err);\n                });\n            });\n        }\n    };\n    GateSchema.prototype.toJSON = function () {\n        return JSON.parse(JSON.stringify(this.constraints));\n    };\n    GateSchema.BREAK = Symbol('break');\n    GateSchema.msgs = {};\n    GateSchema._asyncKeywords = {};\n    GateSchema._validators = {};\n    GateSchema._getMatchSchema = {};\n    GateSchema._getChildSchema = {};\n    GateSchema.Error = ValidationError;\n    return GateSchema;\n}());\nGateSchema.prototype.defaultOptions = {};\nGateSchema.prototype.initConstraints = [];\nexport default GateSchema;\n//# sourceMappingURL=schemaBase.js.map","import $clone from './clone';\nimport $get from './get';\nimport $keys from './keys';\nimport $msg from './msg';\nexport default {\n    $clone: $clone,\n    $keys: $keys,\n    $msg: $msg,\n    $get: $get\n};\n//# sourceMappingURL=index.js.map","export default function $clone(options) {\n    if (options === void 0) { options = {}; }\n    var pick = options.pick, omit = options.omit;\n    var constraintsOrigin = JSON.parse(JSON.stringify(this));\n    var handleMap = pick\n        ? createObjectHandler(function (key) { return pick.indexOf(key) === -1; })\n        : omit\n            ? createObjectHandler(function (key) { return omit.indexOf(key) > -1; })\n            : function () { return undefined; };\n    var handleConstraints = function (constraints) {\n        constraints.forEach(function (item) {\n            if (item.keyword === 'map') {\n                handleMap(item.args[0]);\n            }\n            if (item.keyword === 'switch') {\n                var cases = item.args[1];\n                cases.forEach(function (caseItem) {\n                    handleConstraints(caseItem.schema);\n                });\n            }\n        });\n    };\n    function createObjectHandler(check) {\n        return function (obj) {\n            for (var key in obj) {\n                if (check(key)) {\n                    delete obj[key];\n                }\n            }\n        };\n    }\n    handleConstraints(constraintsOrigin);\n    return new this.constructor({ constraints: constraintsOrigin });\n}\n//# sourceMappingURL=clone.js.map","export default function $keys() {\n    var keys = [];\n    this.constraints.forEach(function (item) {\n        if (item.keyword === 'map') {\n            keys = keys.concat(Object.keys(item.args[0]));\n        }\n        else if (item.keyword === 'switch') {\n            item.args[1].forEach(function (caseItem) {\n                keys = keys.concat(caseItem.schema.$keys());\n            });\n        }\n    });\n    return keys;\n}\n//# sourceMappingURL=keys.js.map","export default function $msg(msg) {\n    var lastConstraintIndex = this.lastConstraintIndex;\n    var constraints = this.constraints;\n    var lastConstraint = constraints[lastConstraintIndex];\n    if (lastConstraint) {\n        if (typeof lastConstraint === 'string') {\n            lastConstraint = {\n                keyword: lastConstraint\n            };\n            constraints.splice(lastConstraintIndex, 1, lastConstraint);\n        }\n        lastConstraint.msg = msg;\n    }\n    return this;\n}\n//# sourceMappingURL=msg.js.map","export default function $get(path, rootData, validationOptions, cb) {\n    if (typeof rootData === 'function') {\n        cb = rootData;\n        rootData = undefined;\n    }\n    else if (typeof validationOptions === 'function') {\n        cb = validationOptions;\n        validationOptions = {};\n    }\n    this.constructor.getSchema(path, {\n        rootData: rootData,\n        options: validationOptions,\n        rootSchema: this\n    }, cb);\n    return this;\n}\n//# sourceMappingURL=get.js.map","var ValidationError = (function () {\n    function ValidationError(options) {\n        Object.assign(this, options);\n    }\n    return ValidationError;\n}());\nexport default ValidationError;\n//# sourceMappingURL=ValidationError.js.map","import aliases from './alias/index';\nimport keywords from './keywords/index';\nimport msgs from './msgs';\nimport protoProps from './protoProps/index';\nimport GateSchemaBase from './schemaBase';\nvar _ = GateSchemaBase.extend({\n    aliases: aliases,\n    keywords: keywords,\n    msgs: msgs\n});\nvar r = _.extend({\n    initConstraints: ['required']\n});\nvar o = _.extend({\n    initConstraints: ['optional']\n});\nObject.assign(GateSchemaBase.prototype, protoProps);\nexport { _, r, o };\nexport default _;\n//# sourceMappingURL=index.js.map","export default {\n    binary: 'should be binary',\n    boolean: 'should be true or false',\n    number: 'should be a number',\n    string: 'should be a string',\n    list: 'should be an list',\n    map: 'should be a map',\n    enum: 'should be one of ${values}',\n    enumList: 'should be a list only containing these values: ${values}',\n    not: 'invalid value',\n    equal: 'should equal to the value of ${id}',\n    format: 'invalid ${format} format',\n    length_string_match: 'should contain ${length} characters',\n    length_string_min: 'should contain at least ${maxLength} characters',\n    length_string_max: 'should contain at most ${maxLength} characters',\n    length_string_range: 'should contain ${minLength} to ${maxLength} characters',\n    length_list_match: 'should contain ${length} items',\n    length_list_min: 'should contain at least ${minLength} items',\n    length_list_max: 'should contain at most ${maxLength} items',\n    length_list_range: 'should contain ${minLength} to ${maxLength} items',\n    length_binary_match: 'should contain ${length} bytes',\n    length_binary_min: 'should contain at least ${minLength} bytes',\n    length_binary_max: 'should contain at most ${maxLength} bytes',\n    length_binary_range: 'should contain ${minLength} to ${maxLength} bytes',\n    max: 'should be less than or equal to ${max}',\n    max_exclusive: 'should be less than ${max}',\n    min: 'should be greater than or equal to ${min}',\n    min_exclusive: 'should be greater than ${min}',\n    notEmpty: 'should not be empty',\n    oneOf: 'invalid value',\n    pattern: 'invalid format',\n    required: 'should not be null or undefined',\n    requiredOne: 'at least one field of ${keys} could not be undefined or null',\n    switch: 'no matching case',\n    unique: 'each element should be unique',\n    value: 'should be ${value}'\n};\n//# sourceMappingURL=msgs.js.map"],"names":["this","required","optional","boolean","number","string","binary","_this","path","whenNotNull","whenNull","_","constructor","switch","any","isObject","x","getConstraints","schema","Array","isArray","constraints","ArrayFrom","charCount","from","str","replace","length","getMatchSchema","_a","cb","schemaItem","args","rootData","_b","state","options","schemas","value","getValue","values","next","i","validate","err","targetPath","branches","targetValue","branch","caseItem","case","schema_1","DATE","DAYS","TIME","DATE_TIME_SEPARATOR","HOSTNAME","NOT_URI_FRAGMENT","URI","URL","EMAIL","IPV4","IPV6","date","matches","match","year","month","day","validators","dateTime","split","full","hour","minute","second","timeZone","time","test","first","name","unshift","splice","lastConstraintIndex","ctx","BREAK","types","Big","e","ArrayBuffer","obj","keys","Object","stateValues","stateMapDefinitions","mapDefinitions","push","key","childKey","call","receivedValue","expectedValues","map","JSON","stringify","expectedValue","format","validator","Error","pattern","flags","constraint","keyword","RegExp","source","add","reg","apply","valueLength","errType","minLength","maxLength","type","index","indexOf","byteLength","expected","min","isExclusive","valueBig","minBig","lt","eq","max","maxBig","gt","uniqueValues","targetId","mapAllowAdditional","extendStatics","pick","omit","constraintsOrigin","parse","handleMap","createObjectHandler","handleConstraints","forEach","item","check","concat","$keys","msg","lastConstraint","validationOptions","undefined","getSchema","ValidationError","assign","__extends","setPrototypeOf","__proto__","d","b","p","hasOwnProperty","__","prototype","create","GateSchema","initConstraints","slice","defineProperty","addAlias","ctor","proto","addKeyword","msgs","getChildSchema","isAsync","createAddFunction","addMsgs","_asyncKeywords","_validators","_getChildSchema","_getMatchSchema","isHighOrder","_i","arguments","resolvePath","currentPath","lastIndexOf","keySplited","keyLength","join","getOwnPropertyDescriptor","prop","parentPath","parentValue","rootSchema","child","callback","getChildSchemaOfKeyword","j","constraintsLength","tryNext","result","matchSchema","currentSchema","extend","defaultOptions","keywords","aliases","parent","GateSchemaExtended","_super","getMsg","createError","msgParams","errorParams","KEY","formatMsg","VError","REMOVE_ADDITIONAL","removeAdditional","SKIPS","skips","SKIP_ASYNC","skipAsync","useCache","resultCache","cache","target","find","getCacheResult","originCb_1","cacheItem","definition","objValue","reduce","current","Ctor","Promise","resolve","reject","toJSON","Symbol","GateSchemaBase","r","o","protoProps"],"mappings":"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"}